function initLunr(){$.getJSON("/search.json").done(function(e){pagesIndex=e,console.log("index:",pagesIndex),lunrIndex=lunr(function(){this.field("title",{boost:10}),this.field("content"),this.ref("href")}),pagesIndex.forEach(function(e){lunrIndex.add(e)})}).fail(function(e,n,t){var r=n+", "+t;console.error("Error getting Hugo index flie:",r)})}function initUI(){$results=$("#results"),$("#search").keyup(function(){$results.empty();var e=$(this).val();if(!(e.length<2)){renderResults(search(e))}})}function search(e){return lunrIndex.search(e).map(function(e){return pagesIndex.filter(function(n){return n.href===e.ref})[0]})}function renderResults(e){e.length&&e.slice(0,10).forEach(function(e){var n=$("<li>");n.append($("<a>",{href:e.href,text:e.title.replace(/&amp;/g,"&")})),n.append($("<p>",{text:e.content.substring(0,150).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,"").replace(/&#39;/g,"")})),$results.append(n)})}var lunrIndex,$results,pagesIndex;initLunr(),$(document).ready(function(){initUI()});